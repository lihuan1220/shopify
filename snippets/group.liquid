{%- doc -%}
  Renders block content for all blocks that extend the group block.

  @param {string} children - The DOM content of the group block.
  @param {object} settings - The settings of the group block.
  @param {string} shopify_attributes - String with Shopify attributes for the editor.
  @param {string} [class] - Custom classes for the group block.
  @param {string} [style] - Custom inline styles for the group block.

  @example
  {% render 'group', children: children, settings: block.settings, shopify_attributes: block.shopify_attributes %}
{%- enddoc -%}

<div
  class="
    group-block
    group-block--height-{{ settings.height }}
    group-block--width-{{ settings.width }}
    border-style
    spacing-style
    size-style
    {% if settings.inherit_color_scheme == false %} color-{{ settings.color_scheme }}{% endif %}
    {{ class }}
    {% if settings.custom_mobile_size %} mobile-border-radius {% endif %}
    {% if settings.device_hide %} device-hide {% endif %}
    {% if settings.mobile_device_hide %} mobile-device-hide {% endif %}
     {% comment %} Èò¥ÂΩ± {% endcomment %}
    {% if settings.box_shadow %} box-shadow-style {% endif %}
     {% comment %} Èº†Ê†áÁßªÂÖ•ÈÄèÊòé {% endcomment %}
    {% if settings.is_mouse_hover_opacity %} mouse-hover-opacity {% endif %}
     {% comment %} ÁªÑÂä®Áîª {% endcomment %}
    {% if settings.group_animation_type != 'none' %} {{ settings.group_animation_type }} {% endif %}
    {% if settings.width == 'pixel' %} width-px {% endif %}
  "
  style="
    {% render 'border-override', settings: settings %}
    {% render 'spacing-style', settings: settings %}
    {% render 'size-style', settings: settings %}
    {% render 'position-style', settings: settings %}
    {{ style }}
    {% if settings.custom_mobile_size %} --mobile-border-radius: {{ settings.modile_border_radius }}px; {% endif %}
    {% comment %} ÊªëÂä®ÂäüËÉΩËÆæÁΩÆ {% endcomment %}
    {% if settings.is_scroll and settings.is_scroll_pagination %} padding-bottom: 20px; {% endif %}
    {% comment %} Âä®ÁîªËÆæÁΩÆ {% endcomment %}
    {% if settings.group_animation_type != 'none' %}
      --animation-duration: {{ settings.group_animation_duration }}s;
      --animation-delay: {{ settings.group_animation_delay }}s;
    {% endif %}
    {% comment %} Êó†ÈôêÂπ≥ÁßªÂä®Áîª {% endcomment %}
    {% if settings.infinite_translation_animation %} overflow: hidden; {% endif %}
  "
  {{ shopify_attributes }}
  data-testid="group-block"
  {% if settings.group_animation_type != 'none' %} data-group-animation {% endif %}
>
  {%- if settings.link != blank -%}
    <a
      href="{{ settings.link }}"
      class="group-block__link"
      {% if settings.open_in_new_tab %}
        target="_blank" rel="noopener"
      {% endif %}
    ></a>
  {%- endif -%}

  <div class="group-block__media-wrapper">
    {% render 'background-media',
      background_media: settings.background_media,
      background_video: settings.video,
      background_video_position: settings.video_position,
      background_image: settings.background_image,
      background_image_position: settings.background_image_position
    %}
    {% if settings.toggle_overlay %}
      {% render 'overlay', settings: settings, layer: '0' %}
    {% endif %}
  </div>

  <div
    class="
      group-block-content
      {% if request.design_mode %}group-block-content--design-mode{% endif %}
      layout-panel-flex
      layout-panel-flex--{{ settings.content_direction | default: 'column' }}
      {% if settings.vertical_on_mobile %} mobile-column{% endif %}
      {% if settings.custom_mobile_size and settings.mobile_layout_reversal %}
        {% if settings.content_direction == 'column' or settings.content_direction == 'row' and settings.vertical_on_mobile %}
          mobile-column-reverse
        {% else %}
          mobile-row-reverse
        {% endif %}
      {% endif %}
      {% if settings.custom_mobile_size %} mobile-gap {% endif %}
      {% if settings.vertical_on_mobile and settings.custom_mobile_size%} mobile-horizontal-alignment {% endif %}
      {% comment %} ÊªëÂä®ÂäüËÉΩËÆæÁΩÆ {% endcomment %}
      {% if settings.is_scroll %} scroll-content 
        {% comment %} ÂàÜÈ°µ {% endcomment %}
        {% if settings.is_scroll_pagination %} scroll-content-pagination {% endif %}
      {% endif %}
      {% comment %} Êó†ÈôêÂπ≥ÁßªÂä®Áîª {% endcomment %}
      {% if settings.infinite_translation_animation %} infinite_translation_animation {% endif %}
    "
    style="
      {% render 'layout-panel-style', settings: settings %}
      {% if settings.custom_mobile_size %} --mobile-gap: {{ settings.mobile_gap }}px; {% endif %}
      {% if settings.vertical_on_mobile and settings.custom_mobile_size %} --mobile-horizontal-alignment: {{ settings.mobile_horizontal_alignment_flex_direction_column }}; {% endif %}
    "
  >
    {{- children -}}
  </div>
  {%- if settings.is_scroll and settings.is_scroll_pagination -%}
    <div class="scroll-pagination-dots" 
      data-pagination-for="{{ shopify_attributes | split: 'data-block-id="' | last | split: '"' | first }}"
      style="
        padding-top: {{ settings.pagination_padding_top }}px;
        justify-content: {{ settings.pagination_alignment }};
        --dot-color: {{ settings.pagination_dot_color }};
        --dot-active-color: {{ settings.pagination_dot_active_color }};
        --dot-width: {{ settings.pagination_dot_width }}px;
        --dot-height: {{ settings.pagination_dot_height }}px;
        --dot-gap: {{ settings.pagination_dot_gap }}px;
        --dot-radius: {{ settings.pagination_dot_radius }}px;
      ">
    </div>
  {%- endif -%}
</div>

{%- comment %} üëá ÂºïÂÖ•ÂàÜÈ°µÁÇπ JS ÈÄªËæë {% endcomment -%}
{%- if settings.is_scroll and settings.is_scroll_pagination -%}
  {% render 'group-scroll-pagination' %}
{%- endif -%}

{% comment %} Êó†ÈôêÂπ≥ÁßªÂä®Áîª {% endcomment %}
{%- if settings.infinite_translation_animation -%}
  {% render 'group-infinite-translation-animation' %}
{%- endif -%}

{% stylesheet %}
  .group-block__link {
    position: absolute;
    inset: 0;
  }

  .group-block__link ~ :is(.group-block-content, .group-block__media-wrapper) {
    pointer-events: none;
    a,
    button,
    input,
    textarea,
    select {
      pointer-events: auto;
    }
  }

  /* Needs the .group-block__link ~ to be specific enough to take effect. */
  .group-block__link ~ .group-block-content--design-mode {
    pointer-events: auto;
  }

  /* ÊªëÂä® */
  .scroll-content {
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  .scroll-content-pagination {
    scroll-snap-type: x mandatory;
    -ms-overflow-style: none;  /* IE Âíå Edge */
    scrollbar-width: none;     /* Firefox */
  }

  .scroll-content-pagination::-webkit-scrollbar {
    display: none;  /* Chrome, Safari, Opera */
  }

  /* ÊàñËÄÖÂ∞ÜÊªöÂä®Êù°ÂÆΩÂ∫¶ËÆæ‰∏∫0 */
  .scroll-content-pagination::-webkit-scrollbar {
    width: 0px;
    background: transparent;
  }

  .scroll-content-pagination > .group-block {
    flex-shrink: 0;
    min-width: 100%;
    scroll-snap-align: start;
  }

  /*  Êñ∞Â¢ûÔºöÂàÜÈ°µÁÇπÊ†∑ÂºèÔºàÁü≠Ê®™Á∫øÔºâ*/
  .scroll-pagination-dots {
    display: flex;
    gap: var(--dot-gap);
    justify-content: center; /* ÈªòËÆ§Â±Ö‰∏≠ */
  }

  .scroll-pagination-dot {
    width: var(--dot-width);
    height: var(--dot-height);
    background-color: var(--dot-color);
    border-radius: var(--dot-radius);
    pointer-events: auto;
    cursor: pointer;
    border: none;
    padding: 0;
  }

  .scroll-pagination-dot.active {
    background-color: var(--dot-active-color);
  }

  .scroll-pagination-dot:not(.active):hover,
  .scroll-pagination-dot:not(.active):focus {
    background-color: var(--dot-active-color);
  }

  .box-shadow-style {
    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1); 
  }
  .box-shadow-style:hover {
    box-shadow: 0 4px 24px 0 rgba(0, 0, 0, .1); 
  }

  .mouse-hover-opacity {
    transition: opacity 0.2s linear;
  }
  .mouse-hover-opacity:hover {
    opacity: 0.7;
  }

  .width-px {
    min-width: var(--size-style-width-mobile, var(--size-style-width));

    @media screen and (min-width: 750px) {
      min-width: var(--size-style-width);
    }
  }
  
  /* PC */
  @media (min-width: 751px) {
    .device-hide {
      display: none;
    }
  }
  /* Mobile */
  @media (max-width: 750px) {
    .mobile-device-hide {
      display: none;
    }
    .mobile-column-reverse {
      flex-direction: column-reverse;
    }
    .mobile-row-reverse {
      flex-direction: row-reverse;
    }
    .mobile-border-radius {
      border-radius: var(--mobile-border-radius) !important;
    }
    .mobile-gap {
      gap: var(--mobile-gap) !important;
    }
    .mobile-horizontal-alignment {
      align-items: var(--mobile-horizontal-alignment);
    }
  }

{% endstylesheet %}
